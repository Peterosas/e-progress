{% extends 'layouts/base.html' %}

{% block content %}
{% include 'includes/navbar.html' %}

{% load static %}

<div class="mt-4 d-flex">
  {% include 'includes/sidebar.html' %}

  <div class="px-5 py-3 flex-grow-1">
    <div class="mb-4">
      <div class="row mb-3">
        <div class="col-md-3">
          <label for="session">Academic Session</label>
          <select class="form-control" id="session">
            <option disabled value="select" selected>Select Academic Session</option>
            <option>All Sessions</option>
            <option>2018/2019</option>
          </select>
        </div>
        
        <div class="col-md-3">
          <label for="semester">Semester</label>
          <select class="form-control" id="semester">
            <option disabled value="select" selected>Select Semester</option>
            <option>All Semesters</option>
            <option>First Semester</option>
            <option>Second Semester</option>
          </select>
        </div>
      </div>

      <div class="d-flex justify-content-end mb-3">
        <button class="btn btn-secondary mr-2" id="add-course"><i class="fas fa-plus"></i> Add Course</button>
      </div>
    </div>

    <table class="table table-bordered w-100 text-left">
      <thead>
        <tr>
          <th scope="col">Course Code</th>
          <th scope="col">Course Title</th>
          <th scope="col">Units</th>
          <th scope="col">Status</th>
          <th scope="col">Actions</th> <!-- New column for actions -->
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row">ENG201.1</th>
          <td>Engineering Mathematics I</td>
          <td>3</td>
          <td>Not Approved</td>
          <td class="text-center"><span class="remove-icon"><i class="fas fa-trash"></i></span></td>
        </tr>
        <tr>
          <th scope="row">ENG202.1</th>
          <td>Engineering Mechanics</td>
          <td>4</td>
          <td>Approved</td>
          <td class="text-center"><span class="remove-icon"><i class="fas fa-trash"></i></span></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

{%include 'includes/add_courses.html' %}

{% endblock %}


{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Handle row deletion
    document.querySelectorAll('.remove-icon').forEach(function(icon) {
      icon.addEventListener('click', function() {
        if (confirm('Are you sure you want to delete this course?')) {
          // Find the row and remove it
          this.closest('tr').remove();
        }
      });
    });
  });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
      const addCourseBtn = document.getElementById('add-course');
      const drawer = document.getElementById('addCourseDrawer');
      const closeDrawerBtn = document.getElementById('close-drawer');
  
      // Open drawer
      addCourseBtn.addEventListener('click', function() {
        drawer.classList.add('open');
      });
  
      // Close drawer
      closeDrawerBtn.addEventListener('click', function() {
        drawer.classList.remove('open');
      });
  
      // Handle row deletion
      document.querySelectorAll('.remove-icon').forEach(function(icon) {
        icon.addEventListener('click', function() {
          if (confirm('Are you sure you want to delete this course?')) {
            this.closest('tr').remove();
          }
        });
      });
    });
  </script>

  
{% endblock %}
